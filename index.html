<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title id="pageTitle">ATI Study Guide</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" id="favicon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“š</text></svg>">
</head>
<body>
  <div class="bg-animation"></div>

  <!-- Navigation -->
  <nav class="nav">
    <div class="nav-container">
      <div class="nav-logo" id="navLogo">ğŸ“š Study Guide</div>
      <div class="xp-bar-container">
        <div class="level-badge" id="levelBadge">ğŸ“š</div>
        <div class="xp-bar-wrapper">
          <div class="level-name" id="levelName">Nursing Student</div>
          <div class="xp-bar"><div class="xp-bar-fill" id="xpBarFill" style="width: 0%"></div></div>
          <div class="xp-text" id="xpText">0 / 500 XP</div>
        </div>
      </div>
      <div class="mastery-badge" id="masteryBadge" title="Your mastery level">
        <span class="mastery-icon">ğŸ†</span>
        <span class="mastery-level" id="masteryLevel">0%</span>
      </div>
    </div>
  </nav>

  <!-- Main Tab Navigation -->
  <div class="main-tabs">
    <button class="main-tab active" data-maintab="learn"><span class="main-tab-icon">ğŸ“š</span><span class="main-tab-text">Learn</span></button>
    <button class="main-tab" data-maintab="quiz"><span class="main-tab-icon">ğŸ“</span><span class="main-tab-text">Quiz</span></button>
    <button class="main-tab" data-maintab="flashcards"><span class="main-tab-icon">ğŸƒ</span><span class="main-tab-text">Flashcards</span></button>
    <button class="main-tab" data-maintab="progress"><span class="main-tab-icon">ğŸ“Š</span><span class="main-tab-text">Progress</span></button>
    <button class="main-tab game-tab" data-maintab="game"><span class="main-tab-icon">ğŸ®</span><span class="main-tab-text">Play Game</span><span class="new-badge">NEW!</span></button>
  </div>

  <!-- LEARN TAB -->
  <div class="main-tab-panel active" id="panel-learn">
    <!-- Hero Section -->
    <section class="hero" id="hero">
      <div class="hero-content">
        <div class="hero-badge"><span id="heroBadgeIcon">ğŸ“š</span><span id="heroBadgeCourse">Nursing</span></div>
        <h1 id="heroTitle">Study Guide</h1>
        <p class="hero-subtitle" id="heroSubtitle">Master key concepts through active recall and clinical reasoning.</p>
        <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
          <a href="#quick-review" class="btn btn-primary">Start Learning â†’</a>
          <button class="btn btn-secondary" onclick="switchMainTab('quiz')">ğŸ“ Take Quiz</button>
        </div>
        <div class="hero-stats">
          <div class="stat"><div class="stat-value" id="studyStreak">0</div><div class="stat-label">Day Streak ğŸ”¥</div></div>
          <div class="stat"><div class="stat-value" id="cardsmastered">0</div><div class="stat-label">Cards Mastered</div></div>
          <div class="stat"><div class="stat-value" id="quizBest">0%</div><div class="stat-label">Best Quiz Score</div></div>
        </div>
      </div>
    </section>

    <!-- Quick Review Cheat Sheet -->
    <section class="section" id="quick-review">
      <div class="section-header"><h2>âš¡ Quick Review Cheat Sheet</h2><p>The absolute must-know concepts for your exam</p></div>
      <div class="cheat-sheet" id="cheatSheetContainer"></div>
    </section>

    <!-- Clinical Pearls -->
    <section class="section" id="pearls">
      <div class="section-header"><h2>ğŸ’ Clinical Pearls & âš ï¸ Common Mistakes</h2><p>What separates good nurses from great ones</p></div>
      <div class="content-grid" id="pearlsContainer"></div>
    </section>

    <!-- Mnemonics -->
    <section class="section" id="mnemonics">
      <div class="section-header"><h2>ğŸ§  Memory Aids & Mnemonics</h2><p>Quick tricks to lock in key concepts</p></div>
      <div id="mnemonicsContainer"></div>
    </section>

    <!-- Image Gallery -->
    <section class="section" id="images">
      <div class="section-header"><h2>ğŸ“¸ Visual Learning Gallery</h2><p>Click to explore diagrams</p></div>
      <div class="diagram-gallery"><div class="gallery-grid" id="imageGalleryContainer"></div></div>
    </section>

    <!-- Disorders -->
    <section class="section" id="disorders">
      <div class="section-header"><h2>ğŸ¥ Disorders & Conditions</h2><p>Pathophysiology, assessments, and nursing interventions</p></div>
      <div class="content-grid" id="disordersContainer"></div>
    </section>

    <!-- Pharmacology -->
    <section class="section" id="pharmacology">
      <div class="section-header"><h2>ğŸ’Š Pharmacology</h2><p>Key medications, nursing implications, and patient teaching</p></div>
      <div class="content-grid" id="pharmacologyContainer"></div>
    </section>

    <!-- ATI Priority Logic -->
    <section class="section" id="ati-logic">
      <div class="section-header"><h2>ğŸ¯ ATI Priority & Safety Logic</h2><p>ABCs â†’ Maslow â†’ Acute vs Chronic â†’ Safety</p></div>
      <div class="content-grid" id="atiLogicContainer"></div>
    </section>

    <!-- Resources -->
    <section class="section" id="resources">
      <div class="section-header"><h2>ğŸ“ Additional Resources</h2><p>Extended learning materials</p></div>
      <div class="glass-card" style="text-align: center;">
        <h3>ğŸ§ NotebookLM Study Materials</h3>
        <p style="color: var(--text-secondary); margin: 1rem 0;">Audio overviews, podcasts, and more</p>
        <a id="notebookLMLink" href="#" target="_blank" class="btn btn-primary" style="display: none;">Open NotebookLM â†’</a>
        <p id="notebookLMPlaceholder" style="color: var(--text-muted); font-style: italic;">NotebookLM link will be added</p>
      </div>
    </section>

    <!-- Study Timer -->
    <section class="section" id="timer">
      <div class="section-header"><h2>â±ï¸ Study Timer</h2><p>Pomodoro technique for focused studying</p></div>
      <div class="glass-card" style="max-width: 400px; margin: 0 auto; text-align: center;">
        <div class="timer-display" id="timerDisplay">25:00</div>
        <p style="color: var(--text-secondary); margin: 1rem 0;" id="timerLabel">Focus Session</p>
        <div style="display: flex; gap: 1rem; justify-content: center;">
          <button class="btn btn-primary" id="startTimer">â–¶ï¸ Start</button>
          <button class="btn btn-secondary" id="resetTimer">ğŸ”„ Reset</button>
        </div>
        <div style="display: flex; gap: 0.5rem; justify-content: center; margin-top: 1rem;">
          <button class="tab active" data-time="25">25 min</button>
          <button class="tab" data-time="5">5 min break</button>
          <button class="tab" data-time="15">15 min break</button>
        </div>
      </div>
    </section>
  </div>

  <!-- QUIZ TAB -->
  <div class="main-tab-panel" id="panel-quiz">
    <section class="section">
      <div class="section-header"><h2>ğŸ“ NCLEX-Style Quiz</h2><p>Test your knowledge with ATI-formatted questions</p></div>
      <div class="quiz-container" id="quizContainer">
        <div class="quiz-header">
          <div class="quiz-progress"><span id="questionCounter">Question 1 of 10</span><div class="progress-bar"><div class="progress-fill" id="quizProgressBar" style="width: 10%"></div></div></div>
          <div class="quiz-score">Score: <span id="currentScore">0</span></div>
        </div>
        <div class="quiz-question" id="quizQuestion"></div>
        <div class="quiz-options" id="quizOptions"></div>
        <div class="quiz-feedback" id="quizFeedback" style="display: none;"></div>
        <div class="quiz-actions">
          <button class="btn btn-primary" id="nextQuestion" style="display: none;">Next Question â†’</button>
          <button class="btn btn-secondary" id="submitAnswer">Submit Answer</button>
        </div>
      </div>
      <div class="quiz-results" id="quizResults" style="display: none;">
        <div class="results-card">
          <h2>ğŸ‰ Quiz Complete!</h2>
          <div class="score-display"><div class="score-circle"><span class="score-value" id="finalScore">0</span><span class="score-label">%</span></div></div>
          <p class="score-message" id="scoreMessage">Great job!</p>
          <div class="results-stats">
            <div class="stat"><span class="stat-value" id="correctCount">0</span><span class="stat-label">Correct</span></div>
            <div class="stat"><span class="stat-value" id="incorrectCount">0</span><span class="stat-label">Incorrect</span></div>
          </div>
          <button class="btn btn-primary" id="restartQuiz">Try Again</button>
        </div>
      </div>
    </section>
  </div>

  <!-- FLASHCARDS TAB -->
  <div class="main-tab-panel" id="panel-flashcards">
    <section class="section">
      <div class="section-header"><h2>ğŸƒ Flashcards</h2><p>Active recall with spaced repetition</p></div>
      <div class="flashcard-container">
        <div class="flashcard-progress"><span id="cardCounter">Card 1 of 25</span><div class="mastery-indicator"><span>Mastered: </span><span id="masteredCount">0</span></div></div>
        <div class="flashcard" id="flashcard">
          <div class="flashcard-inner">
            <div class="flashcard-front"><p id="flashcardQuestion">Loading...</p><span class="flip-hint">Click to reveal answer</span></div>
            <div class="flashcard-back"><p id="flashcardAnswer">Loading...</p></div>
          </div>
        </div>
        <div class="flashcard-controls">
          <button class="btn btn-secondary" id="prevCard">â† Previous</button>
          <div class="confidence-buttons">
            <button class="confidence-btn again" data-confidence="0" title="Show again soon">Again</button>
            <button class="confidence-btn hard" data-confidence="1" title="Somewhat difficult">Hard</button>
            <button class="confidence-btn good" data-confidence="2" title="Got it with effort">Good</button>
            <button class="confidence-btn easy" data-confidence="3" title="Easy!">Easy</button>
          </div>
          <button class="btn btn-secondary" id="nextCard">Next â†’</button>
        </div>
        <div class="keyboard-hint"><span class="kbd">Space</span> Flip <span class="kbd">â†â†’</span> Navigate <span class="kbd">1-4</span> Rate</div>
        <div class="swipe-indicator">ğŸ‘† Tap to flip â€¢ Swipe left/right to navigate</div>
      </div>
    </section>
  </div>

  <!-- PROGRESS TAB -->
  <div class="main-tab-panel" id="panel-progress">
    <section class="section">
      <div class="section-header"><h2>ğŸ“Š Your Progress</h2><p>Track your learning journey</p></div>
      <div class="progress-dashboard">
        <div class="glass-card">
          <h3>ğŸ† Achievements</h3>
          <div class="achievements-grid" id="achievementsGrid"></div>
        </div>
        <div class="glass-card">
          <h3>ğŸ“ˆ Statistics</h3>
          <div class="stats-grid">
            <div class="stat-item"><span class="stat-icon">ğŸ¯</span><span class="stat-value" id="totalQuizzes">0</span><span class="stat-label">Quizzes Taken</span></div>
            <div class="stat-item"><span class="stat-icon">ğŸƒ</span><span class="stat-value" id="totalCards">0</span><span class="stat-label">Cards Reviewed</span></div>
            <div class="stat-item"><span class="stat-icon">â±ï¸</span><span class="stat-value" id="studyTime">0</span><span class="stat-label">Minutes Studied</span></div>
            <div class="stat-item"><span class="stat-icon">ğŸ”¥</span><span class="stat-value" id="longestStreak">0</span><span class="stat-label">Longest Streak</span></div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- GAME TAB -->
  <div class="main-tab-panel" id="panel-game">
    <div class="game-fullscreen-container">
      <div class="game-container">
        <canvas id="gameCanvas"></canvas>
        <div class="game-controls-info" aria-label="Ping pong controls">
          <div class="control-item"><kbd>W</kbd><span>Move Up</span></div>
          <div class="control-item"><kbd>S</kbd><span>Move Down</span></div>
          <div class="control-item"><kbd>Space</kbd><span>Serve / Restart</span></div>
          <div class="control-item"><kbd>P</kbd><span>Pause</span></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-content">
      <div class="footer-brand"><span class="footer-logo" id="footerIcon">ğŸ“š</span><span class="footer-title" id="footerTitle">ATI Study Guide</span></div>
      <div class="footer-disclaimer">
        <p class="disclaimer-title">ğŸ“š Educational Resource</p>
        <p id="footerDescription">Study guide using ATI methodology.</p>
        <p>Created as a <strong>personal study resource</strong> for nursing students.</p>
      </div>
      <div class="footer-meta"><p>Â© 2025 â€¢ For personal study use only</p></div>
    </div>
  </footer>

  <!-- Theme Toggle -->
  <button class="theme-toggle" id="themeToggle" title="Toggle theme">â˜€ï¸</button>

  <!-- Image Modal -->
  <div class="modal" id="imageModal" style="display:none;">
    <div class="modal-content">
      <span class="modal-close" onclick="closeImageModal()">&times;</span>
      <img id="modalImage" src="" alt="">
      <h3 id="modalTitle"></h3>
      <p id="modalDescription"></p>
    </div>
  </div>

  <!-- LOAD ORDER: Data first, then app, then game -->
  <script src="studyData.js"></script>
  <script src="app.js"></script>
  <script src="game.js"></script>
</body>
</html>
